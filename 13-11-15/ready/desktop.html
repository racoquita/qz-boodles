<style type="text/css">
	#qzad{min-width:720px;max-width:1100px;height:480px;position:relative;top:0;bottom:0;left:0;right:0;background:url(http://ads.qz.com/sponsors/boodles/13-11-15/desktop/img/water.jpg) 0 0 no-repeat}a{display:block;text-decoration:none}img{display:block;width:100%}
	#tcontainer,#bcontainer{position:absolute;top:0;width:100%;max-width:1100px;min-width:700px;height:480px;overflow:hidden}#tcontainer{z-index:2}#bcontainer{z-index:1;opacity:0;height:100%;width:100%;background:url("http://ads.qz.com/sponsors/boodles/13-11-15/desktop/img/imgB.png") 0 0 no-repeat}
	#bcontainer.fadeIn{-webkit-transition:opacity 2s ease;-moz-transition:opacity 2s ease;-ms-transition:opacity 2s ease;-o-transition:opacity 2s ease;transition:opacity 2s ease;opacity:1}@media all and (max-width:952px) and (min-width:926px){#bcontainer{background:url("http://ads.qz.com/sponsors/boodles/13-11-15/desktop/img/imgB.png") -75px 0 no-repeat}
	}@media all and (max-width:925px){#bcontainer{background:url("http://ads.qz.com/sponsors/boodles/13-11-15/desktop/img/imgB.png") -78px 0 no-repeat}}@media all and (max-width:923px) and (min-width:721px){#bcontainer{background:url("http://ads.qz.com/sponsors/boodles/13-11-15/desktop/img/imgB.png") -69px 0 no-repeat}
	}@media all and (max-width:720px){#bcontainer{background:url("http://ads.qz.com/sponsors/boodles/13-11-15/desktop/img/imgB.png") -308px 0 no-repeat}}.tpanel,.bpanel{height:100%;float:left;position:relative}.top{z-index:11}.bottom{z-index:1}.top,.bottom{position:absolute;width:100%;height:100%;background-repeat:no-repeat}
	.move{-webkit-transition:all 4s ease-in;-moz-transition:all 4s ease-in;-ms-transition:all 4s ease-in;-o-transition:all 4s ease-in;transition:all 4s ease-in}.moveIn{opacity:1;-webkit-transition:all 1s ease-in;-moz-transition:all 1s ease-in;-ms-transition:all 1s ease-in;-o-transition:all 1s ease-in;transition:all 1s ease-in}
	.fade{-webkit-transition:opacity .5s ease 0s;-moz-transition:opacity .5s ease;-ms-transition:opacity .5s ease;-o-transition:opacity .5s ease;transition:opacity .5s ease;opacity:0}.fadeIn{-webkit-transition:opacity 2s ease;-moz-transition:opacity 2s ease;-ms-transition:opacity 2s ease;-o-transition:opacity 2s ease;transition:opacity 2s ease;opacity:1}
	.cta{position:absolute;top:268px;left:60.9090909091%;display:none;z-index:12}.cta .shop-collection{display:block;width:100%;height:30px;max-width:211px;min-width:210px;width:21.8181818182%}.cta .shop-collection img{width:100%}.copy{position:absolute;top:268px;left:60.8181818182%;width:21.8181818182%;min-width:212px;max-width:240px}
	.bg-container{position:absolute;top:0;left:0;bottom:0;right:0}#logo{position:absolute;top:213px;left:55.1818181818%;width:30.7272727273%;max-width:338px;min-width:294px;z-index:11}.cta2{position:absolute;bottom:26px;right:3.63636363636%;width:11.3636363636%;min-width:125px;z-index:12}
</style>
<meta name="viewport" content="initial-scale=1">
<div id="qzad">
	<div id="tcontainer"></div>
	<div id="bcontainer" class="bg-container"></div>
	<div class="cta">
		<a href="http://www.boodles.com/" target="_blank" class="shop-collection ixtrack" data-ix-category="external" data-ix-label="shop collection">
			<img id="bCopy" src="http://ads.qz.com/sponsors/boodles/13-11-15/desktop/img/b-copy.png" width="240" />
		</a>
	</div>
	<div class="copy">
		<img id="aCopy" src="http://ads.qz.com/sponsors/boodles/13-11-15/desktop/img/a-copy.png" width="240" />
	</div>
	<div id="logo">
		<img src="http://ads.qz.com/sponsors/boodles/13-11-15/desktop/img/logo.png" alt="Boodles"/>
	</div>
	<div class="cta2">
		<a href="http://www.boodles.com/" target="_blank" class="ixtrack" data-ix-category="external" data-ix-label="boodles website - shop online">
			<img src="http://ads.qz.com/sponsors/boodles/13-11-15/desktop/img/cta2.png" alt="Shop Online now"/>
		</a>
	</div>
</div>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" type="text/javascript"></script>
<script id="ix-namer"
	data-ix-name="Boodles Desktop"
	src="http://ads.qz.com/js/qzad/qzad-1.0.js"
	type="text/javascript"></script>
<script src="http://app.qz.com/js/frameMessager/QZIX.js" type="text/javascript"></script>
<script src="http://app.qz.com/js/frameMessager/frameMessager.js" type="text/javascript"></script>
<script type="text/javascript">
	var qz = {};

	qz.transx = function(elemt, elemb, arr, num) {
		var elt;
		var elb;
		var panelSize;
		var panelLeft;
		var panelRight;
		var cssTime = 5000;
		var w; 
		var waitForFinalEvent = (function() {
			var timers = {};
			return function (callback, ms, uniqueId) {
				if (!uniqueId) uniqueId = "uniqueId";
				if (timers[uniqueId]) clearTimeout (timers[uniqueId]);
				timers[uniqueId] = setTimeout(callback, ms);
			};
		})();
		(function(){init()})();

		function init() {
			if(elemt && elemb && arr && num) {
				if(elt = document.getElementById(elemt)) {
					elb = document.getElementById(elemb);
					setSizing();
					window.addEventListener('load', function(){
					  	elt.setAttribute('style','visibility:visible;');
					  	elb.setAttribute('style','visibility:visible;');
					});
					window.addEventListener('resize', function(e){
						waitForFinalEvent(function(){
							next = 0;
							elt.innerHTML = "";
							elb.innerHTML = "";
							setSizing();
						}, 250, 'unique');
					});
				} else { throw new Error('an element with the id of "' + elemt + '" was not found'); }
			} else { throw new Error('required parameter(s) missing'); }
		};
		function setSizing() {
			var w = elt.clientWidth;
			var s = w % num;

			if(!s) {
				panelSize = panelLeft = panelRight = (w / num);
			} else {
				panelSize = Math.floor(w / num) ;
				if(!(s % 2)) {
					panelLeft = panelRight = (panelSize + s / 2) ;
				} else {
					panelLeft = panelSize + Math.ceil(s / 2);
					panelRight = panelSize + Math.floor(s / 2);
				}
			}
			createPanelsOut();
			
		};
		function createPanelsOut() {
			var panel;
			var top;
			var multiplier = (elt.clientWidth - 720) / 380;
			var move = (Math.abs(multiplier - 1) * 150);

			for(var i = 0; i < num; i++){
				panel = document.createElement('div');
				panel.className = 'tpanel';
				top = document.createElement('div');
				top.className = 'top';
				top.style.backgroundImage = "url('"+ arr[1] +"')";
				if(i == 0) {
					panel.setAttribute('style','width:' + panelLeft + 'px');
					top.style.backgroundPosition = "-" + move + "px 0px";
				} else if(i == (num - 1)) {
					panel.setAttribute('style','width:' + panelRight + 'px');
					top.style.backgroundPosition = "-" + (move + panelLeft + (panelSize * (num - 2))) + "px 0px";
				} else {
					panel.setAttribute('style','width:' + panelSize + 'px');
					top.style.backgroundPosition = "-" + (move + (panelSize * i) + (panelLeft - panelSize)) + "px 0px";
				}
				panel.appendChild(top);
				elt.appendChild(panel);
			}
		};
		function doOut(i, a) {
			var p = document.getElementsByClassName('tpanel');
			var t = factorial() / num;

			setTimeout(function(){
				setTimeout(function(){
					a.className = a.className += " move";
					a.style.backgroundPosition = (i * 250 + elt.clientWidth) + 'px 0px';
				}, (num - i) * 100);
				setTimeout(function(){
					p[i].className = p[i].className + ' fade';
				}, ((num - i) * (t/2)) + 500);
			}, i);
		};

		function factorial() { 
			var result = 0;
			for(var i = 0;i < num;i++) { result += i * 100 }
			return result;
		} 
		qz.transx.out = function() {
			var a = document.getElementsByClassName('top');
			for(var i = a.length - 1;i >= 0;i--) {
				doOut(i, a[i]);
			}
		};
	}
</script>

<script type="text/javascript">
	var cta, copy, imgB;
	var onResizeDone = (function () {
		var timers = {};
		return function (callback, ms, uniqueId) {
			if (!uniqueId) uniqueId = "Don't call this twice without a uniqueId";
			if (timers[uniqueId]) clearTimeout (timers[uniqueId]);
			timers[uniqueId] = setTimeout(callback, ms);
		};
	})();
	
	$(document).ready(function(){
		qz.transx('tcontainer', 'bcontainer', [
			'http://ads.qz.com/sponsors/boodles/13-11-15/desktop/img/imgB.png', 
			'http://ads.qz.com/sponsors/boodles/13-11-15/desktop/img/imgA.png'
		], 10);

		QZAD.init({
			el: document.getElementById( 'qzad' ),
	        frameHeight: 480,
	        App: { on: function() {startAd()}, off: function() {resetAd()}}
		});
	});

	function startAd() {
		cta = $('.cta');
		copy = $('.copy');
		imgB = $('#bcontainer');
		
		setTimeout(function() {
			qz.transx.out();
			copy.fadeOut(1500);
		}, 1500);

		setTimeout(function() {
			imgB.addClass('fadeIn');
			cta.fadeIn(1000);
		}, 4000);

		$( window ).resize(function() {
			imgB.removeClass('fadeIn');
		});
	};

	function resetAd() {
		cta.attr('style','');
		copy.attr('style','');
		imgB.removeClass('fadeIn');
		qz.transx.reset();
	};
</script>
